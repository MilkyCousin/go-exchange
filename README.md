# go-exchange

## Що це за звір такий?

Простенький проект в стилі 'дізнатися поточний курс USD в UAH' на основі Go з використанням Docker, MySQL.
Для отримання даних про курс валют використовуються методи [ExchangeRate-API](https://www.exchangerate-api.com/docs).

У даному веб-сервісі реалізовано такі операції:
- Отримання поточного курсу долара (USD) у гривні (UAH);
- Підписаня емейлу на отримання інформації по зміні курсу;
- Надсилання емейлів з актуальним курсом на підписані пошти.

## Інсталяція

Для безперебійного запуску проекту рекомендується використовувати [Docker](https://docs.docker.com/engine/install/).

Припустимо, що Docker встановлено. Тоді послідовність кроків може бути такою:
1. Клонуєте цей репозиторій у зручному для вас місці.
2. Переходите в ту директорію, куди зроблено клонування репозиторія.
3. Знаходите 'env-params.txt' файл, в ньому редагуєте значення змінних:
   - EXCHANGE_API_TOKEN - вказуєте токен [ExchangeRate-API](https://www.exchangerate-api.com), який отримали під час реєстрації (або іншим шляхом).
   - EMAIL_ADDRESS, EMAIL_PASSWORD, EMAIL_SMTPHOST, EMAIL_SMTPPORT - credentials поштової скриньки, з якої можна відправити контент по SMTP.
   - За потреба можна змінити порти у змінних WEB_PORT_TARGET, WEB_PORT_PUBLISH, DB_PORT_TARGET, DB_PORT_PUBLISH.
5. Відредагований файл 'env-params.txt' перейменовуєте на '.env'.
6. Відкриваєте термінал (або аналог), запускаєте окрестратор використовуючи відповідну команду
   ```
   docker compose up
   docker-compose up
   ```
7. Дивитеся на результат виконання попередньої операції. У разі конфлікту портів, замінити на інші значення в '.env' файлі.
8. Якщо запуск сервісу відбувся успішно, можна виконувати запити по 'http://localhost:WEB_PORT_PUBLISH/method', де 'method' є назвою відповідного методу, передбаченого сервісом.

Опис методів сервісу наведено далі.

## Опис методів

| Назва | Тип | Вхідні параметри | Відповідь | Опис |
| --- | --- | --- | --- | --- |
| rate | GET | - | {"number": курс} | Отримання поточного курсу USD до UAH |
| subscribe | POST | email: адреса | {"description": коментар} | Спробувати додати емейл на отримання поточного курсу |
| sendEmails | POST | - | - | Надіслати повідомлення на додані емейли |

У позначеннях вище, "курс" - це поточний курс USD у UAH, "коментар" є опис результату додавання електронної адреси до бази даних (Неправильний формат / Додано / Не додано).

Проект потребує деякого доопрацювання на етапі з розсилкою листів.
